<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Trivia Quiz Project</title>

    <script type="text/javascript">

        

        function loadTimer()    // This function is called if user enters a value into the Time Limit Prompt 
        {
            timer = setTimeout("alert('Times Up!!') + gradeUser() ", timeLimit);
        }

        function startQuiz()    // This function starts the quiz process
        {
            for (q = 0; q < userNumQuestions; q++)     // create the for loop and assign 'q' as the index pointer
            {                                     
                displayQuestion(q);     // call the display function and pass it 'q' pointer                    
            }
        }
    
        function displayQuestion(i)
        {       // create the function that will display the question for each cycle of the loop
                // alert("This is the beginning of the displayQuestion function; i is equal to " + i);
            var questionId = "question" + i;
                // Output radio buttons with possible solutions to the screen
                if(triviaArray[i][2] == "multiChoice")
                {
                    document.write("<p>" + "QUESTION # " + triviaArray[i][0] + ": "+ triviaArray[i][3] + "</p>");
                    document.write("<input type='radio' id='" + 'a' + triviaArray[i][0] + "' + name='" + questionId + "' value='" + triviaArray[i][4] + "'>'" + triviaArray[i][4] + "<br/>");
                    document.write("<input type='radio' id='" + 'b' + triviaArray[i][0] + "' + name='" + questionId + "' value='" + triviaArray[i][4] + "'>'" + triviaArray[i][5] + "<br/>");
                    document.write("<input type='radio' id='" + 'c' + triviaArray[i][0] + "' + name='" + questionId + "' value='" + triviaArray[i][5] + "'>'" + triviaArray[i][6] + "<br/>");
                    document.write("<input type='radio' id='" + 'd' + triviaArray[i][0] + "' + name='" + questionId + "' value='" + triviaArray[i][6] + "'>'" + triviaArray[i][7] + "<br/>");
                // document.write("<input type='submit' onclick='continue'>");
                }

                // This if statement tests for fill in blank questions and outputs them appropriately with a user input box
                if(triviaArray[i][2] == "fillInBlank")
                {
                    document.write("<p>" + "QUESTION # " + triviaArray[i][0] + ": "+ triviaArray[i][3] + "</p>");
                    document.write("<input type='text' id = 'usrText" + i +"'' name = 'fibText' >");  // input box
                    //alert("text box = " + document.getElementById('text' + i));
                }


        }   // end of the displayQuestion function

        function gradeUser()    // create function that will check the users answers for multichoice questions
        {   // alert("This is the beginning of the gradeUser function");        
            var userAnswer = "";
                // Stop the timer
            clearTimeout(timer);            
                // Check if answer is correct - probably could use a ****switch case**** here...
            for (c = 0; c < userNumQuestions; c++)   // the for loop will check the answer against each option
            {   
                var solution = triviaArray[c][1];
                //alert("The correct answer to question " + (c + 1) + " is " + solution);   // Display the correct answer

                if(triviaArray[c][2] == "multiChoice")
                {
                
                var answerOption = "a" + (c+1);     // alert("(debugger) answerOption = " + answerOption);
                if(document.getElementById(answerOption).checked == true) { userAnswer = "a"; }
                
                var answerOption = "b" + (c+1);
                if(document.getElementById(answerOption).checked == true) { userAnswer = "b"; }

                var answerOption = "c" + (c+1);
                if(document.getElementById(answerOption).checked == true) { userAnswer = "c"; }

                var answerOption = "d" + (c+1);
                if(document.getElementById(answerOption).checked == true) { userAnswer = "d"; }

                //alert("You selected " + userAnswer);    // display the users choice
                if(userAnswer == solution)
                    numCorrect++;                       // count if correct
                else 
                    numWrong++;                         // count if wrong 

                }   // End of the Multiple Choice If statement

                if(triviaArray[c][2] == "fillInBlank")
                {
                    var usrTextAnswer = document.getElementById("usrText" + c).value;
                    //alert(usrTextAnswer);
                        // put the answer from the array into a variable to pass to the function
                    var correctTextAns = triviaArray[c][1];
                    //alert("the correct answer is " + correctTextAns );
                        // Create a regular expression object that contains the string from the array
                    var correctRegExp = new RegExp(correctTextAns,"i");
                        // If statement tests the value from the text box against the RegExp
                        
                    if(usrTextAnswer.search(correctRegExp) != -1)
                    {   // execute this if a positive value is returned
                        //alert("you got it right!");
                        numCorrect++;
                    }
                    else
                    {   // execute this if a -1 is returned
                        //alert("you're wrong!");
                        numWrong++;
                    }               
                
                }   // End of the Fill In the Blank if statement

            }   // End of the For loop   

                // Display score to the user
            alert("You answered " + numCorrect + " correctly, and you got " + numWrong + " wrong!");
        
        }   // End of gradeUser() function


                        // Create an array for multichoice questions and answers
                        var triviaArray = new Array;      
                // Put a second array inside of the first array for 2 dimensional array  
            triviaArray[0] = new Array;             
            triviaArray[0][0] = "1";                // question number
            triviaArray[0][1] = "a";                // solution to question
            triviaArray[0][2] = "multiChoice";      // type of question
                // trivia question and answers below
            triviaArray[0][3] = "Which programming language was developed by Netscape?";                
            triviaArray[0][4] = "JavaScript";                
            triviaArray[0][5] = "C++";
            triviaArray[0][6] = "Fortran";
            triviaArray[0][7] = "Unix";

            triviaArray[1] = new Array;             
            triviaArray[1][0] = "2";                // question number
            triviaArray[1][1] = "d";                // solution to question
            triviaArray[1][2] = "multiChoice";      // type of question
                // trivia question and answers below
            triviaArray[1][3] = "Which of the following is not a method for encoding text characters on a computer?";                
            triviaArray[1][4] = "EBCDIC";                
            triviaArray[1][5] = "ASCII";
            triviaArray[1][6] = "SIXBIT";
            triviaArray[1][7] = "ANSI";

            triviaArray[2] = new Array;             
            triviaArray[2][0] = "3";                // question number
            triviaArray[2][1] = "b";                // solution to question
            triviaArray[2][2] = "multiChoice";      // type of question
                // trivia question and answers below
            triviaArray[2][3] = "Which of the following terms does not refer to a potentially harmful computer program?";                
            triviaArray[2][4] = "Rootkit";                
            triviaArray[2][5] = "Hardware";
            triviaArray[2][6] = "Adware";
            triviaArray[2][7] = "Spyware";

            triviaArray[3] = new Array;             
            triviaArray[3][0] = "4";                // question number
            triviaArray[3][1] = "\\bscratch\\b";                // solution to question
            triviaArray[3][2] = "fillInBlank";      // type of question
                // trivia question and answers below
            triviaArray[3][3] = "What is the block based programming language created to help children learn to code?";                
            triviaArray[3][4] = "";                
            triviaArray[3][5] = "";
            triviaArray[3][6] = "";
            triviaArray[3][7] = "";

            triviaArray[4] = new Array;             
            triviaArray[4][0] = "5";                // question number
            triviaArray[4][1] = "\\blinux\\b";                // solution to question
            triviaArray[4][2] = "fillInBlank";      // type of question
                // trivia question and answers below
            triviaArray[4][3] = "What is the open source operating system released by Linus Torvalds called?";                
            triviaArray[4][4] = "";                
            triviaArray[4][5] = "";
            triviaArray[4][6] = "";
            triviaArray[4][7] = "";

            triviaArray[5] = new Array;             
            triviaArray[5][0] = "6";                // question number
            triviaArray[5][1] = "\\btux\\b";                // solution to question
            triviaArray[5][2] = "fillInBlank";      // type of question
                // trivia question and answers below
            triviaArray[5][3] = "What is the name of the previous answer's mascot?";                
            triviaArray[5][4] = "";                
            triviaArray[5][5] = "";
            triviaArray[5][6] = "";
            triviaArray[5][7] = "";  
    
    </script>   <!-- End of header script area -->
</head>

<!--///////////////////////////////////////////////////////////////////////////////////////////////////-->

<body>
    <form name="testForm" id="testForm">       
        
        <script language = "javascript">

                // Display H1 Title text
            document.write("<h1>Trivia Quiz</h1></br>");

                // Initialize variables
            var timeLimit = 0;
            var timer;
            var userNumQuestions = triviaArray.length;
            var numCorrect = 0;
            var numWrong = 0;

            userNumQuestions = prompt("Please enter the number of questions \n you would like to try ( 1 - " + triviaArray.length + " )");

            timeLimit = prompt("If you would like to set a time limit, \nenter the seconds here; If not leave blank", 0);

            //alert("The length of the array is " + triviaArray.length);

            if(timeLimit != 0)  // This statement will execute the quiz with a timer if a value is entered at the prompt  
            {
                timeLimit = timeLimit * 1000;   // sets the milliseconds to seconds
                loadTimer();
                startQuiz();
            }   // end of if statement
            else
            {
                //alert("the else statement started");
                startQuiz();
            }   // end of else statement

            //document.write("<button onclick = 'gradeUser()'>Check Answers</button>");      //<!--This button ends, grades and returns the score of the quiz -->

        </script>

    </form>    

    </br></br><button onclick = "gradeUser()">Check Answers</button>      This button ends, grades and returns the score of the quiz

    </body>
</html>